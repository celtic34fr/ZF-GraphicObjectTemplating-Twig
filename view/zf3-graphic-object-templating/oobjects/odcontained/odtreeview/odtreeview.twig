{# template de l'objet ODTreeview #}

{% import _self as macros %}

{% macro drawLeaf(key, item, path, icon, objet) %}
    {% import _self as macros %}
    {% if item.children|length == 0 %}
        <li data-lvl="{{ path[key] }}" data-ord="{{ key }}">
            {% if icon %}
                {% switch(item.icon) %}
                {% case 'none' %}
                    <i class="{{ objet.leafIco }} icon leaf"></i>
                {% default %}
                    <i class="{{ item.icon }}"></i>
                {% endswitch %}
            {% endif %}
            {{ item.libel }}
        </li>
    {% else %}
        <li data-lvl="{{ path[key] }}" data-ord="{{ key }}">
            <input type="checkbox" id="lvl_{{ key }}">
            {% if icon %}
                {% switch(item.icon) %}
                {% case 'none' %}
                    <i class="{{ objet.nodeClosedIco }} icon closed"></i>
                    <i class="{{ objet.nodeOpenedIco }} icon opened"></i>
                {% default %}
                    <i class="{{ item.icon }} icon closed"></i>
                    <i class="{{ item.icon }} icon opened"></i>
                {% endswitch %}
            {% endif %}
            <label for="lvl_{{ key }}">{{ item.libel }}</label>
            <ul>
                {% for id,leaf in item.children %}
                    {{ macros.drawLeaf(id, leaf, path, icon, objet) }}
                {% endfor %}
            </ul>
        </li>
    {% endif %}
{% endmacro %}

<div id="{{ objet.id }}" class="treeview">
    <style>
    {% if objet.styleTree is defined and objet.styleTree|length > 0 %}

            {% for item in styleTree %}
            /* habillage sp√©cifique */
            li.n{{ item.level }}:hover {
                border: 1px solid {{ item.color }};
                border-radius: 3px;
                background-color: {{ item.backgroundColor }};
            }
            {% endfor %}
    {% endif %}
    </style>

    <ul>
        {% for id,leaf in objet.dataTree %}
            {{ macros.drawLeaf(id, leaf, objet.dataPath, objet.icon, objet) }}
        {% endfor %}
    </ul>
</div>
